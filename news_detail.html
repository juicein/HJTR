<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åŠ è½½ä¸­...</title>

<!-- ===== Open Graphï¼ˆQQ / Safari Reader é¢„è¯»ï¼‰===== -->
<meta property="og:type" content="article">
<meta property="og:title" content="åŠ è½½ä¸­...">
<meta property="og:description" content="æ­£åœ¨åŠ è½½æ–°é—»...">
<meta property="og:image" content="">
<meta property="og:url" content="">
<!-- =============================================== -->

<!-- ===== Safari / Apple Reader å‹å¥½ ===== -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="æ–°é—»">
<meta name="theme-color" content="#ffffff">
<meta name="format-detection" content="telephone=no">
<!-- =================================== -->

<link rel="stylesheet"
 href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
<link rel="stylesheet" href="assets/style.css">

<style>
.detail-page {
  max-width: 800px;
  margin: 0 auto;
  padding: 24px;
  animation: fadeUp 0.4s ease-out;
}
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
.d-img {
  width: 100%;
  border-radius: 20px;
  margin-bottom: 20px;
  display: none;
}
.d-meta {
  color: var(--md-sys-color-outline);
  margin-bottom: 20px;
  font-size: 0.9rem;
}
.d-tag {
  background: var(--md-sys-color-primary-container);
  color: var(--md-sys-color-on-primary-container);
  padding: 4px 10px;
  border-radius: 8px;
  font-weight: bold;
  margin-right: 10px;
}
article section p {
  line-height: 1.9;
  font-size: 1.1rem;
  margin-bottom: 1em;
}
</style>
</head>

<body>

<header class="top-app-bar">
<button class="icon-btn" onclick="history.back()">
  <span class="material-symbols-outlined">arrow_back</span>
</button>
<div style="flex:1;text-align:center;font-weight:bold;">è¯¦æƒ…</div>
<button class="icon-btn" id="share-btn">
  <span class="material-symbols-outlined">share</span>
</button>
</header>

<main class="detail-page">

<!-- ===== Safari Reader è¯†åˆ«æ ¸å¿ƒ ===== -->
<article id="article">

<h1 id="d-title">åŠ è½½ä¸­...</h1>

<div class="d-meta">
  <span id="d-loc" class="d-tag"></span>
  <span id="d-date"></span> &nbsp;
  <span id="d-auth"></span>
</div>

<img id="d-img" class="d-img" alt="æ–‡ç« é…å›¾">

<section id="d-content"></section>

<a id="d-link" href="#" target="_blank"
 class="icon-btn method-close"
 style="display:none;margin-top:30px;text-align:center;">
æŸ¥çœ‹åŸæ–‡
</a>

</article>
<!-- ================================ -->

</main>

<script>
document.addEventListener('DOMContentLoaded', async () => {

const id = parseInt(new URLSearchParams(location.search).get('id'));

try {
  const res = await fetch('news_content.json');
  const data = await res.json();
  const news = data.find((_, i) => i + 1 === id);
  if (!news) throw 0;

  document.title = news.title;
  d('d-title').innerText = news.title;
  d('d-loc').innerText = news.location;
  d('d-date').innerText = news.date;
  d('d-auth').innerText = news.author;

  // ğŸ‘‰ æ­£æ–‡è½¬ä¸ºæ®µè½ï¼ˆSafari å¬å–æ•ˆæœæ›´è‡ªç„¶ï¼‰
  d('d-content').innerHTML =
    news.content.split(/\n+/).map(p => `<p>${p}</p>`).join('');

  if (news.image) {
    d('d-img').src = news.image;
    d('d-img').style.display = 'block';
  }

  if (news.link) {
    d('d-link').href = news.link;
    d('d-link').style.display = 'block';
  }

  setOG('og:title', news.title);
  setOG('og:description', news.content.slice(0, 80) + 'â€¦');
  if (news.image) setOG('og:image', news.image);
  setOG('og:url', location.href);

} catch {
  d('d-title').innerText = 'åŠ è½½å¤±è´¥';
}

d('share-btn').onclick = () => {
  navigator.share
    ? navigator.share({ title: document.title, url: location.href })
    : (navigator.clipboard.writeText(location.href), alert('é“¾æ¥å·²å¤åˆ¶'));
};

function d(id){ return document.getElementById(id); }
function setOG(p,v){
  const m=document.querySelector(`meta[property="${p}"]`);
  if(m) m.content=v;
}
});
</script>

</body>
</html>

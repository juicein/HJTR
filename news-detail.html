<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="../assets/style.css" />
  <title>åŠ è½½ä¸­...</title>

  <!-- é»˜è®¤ OG æ ‡ç­¾ï¼ˆJS åŠ è½½åä¼šæ›¿æ¢ï¼‰ -->
  <meta property="og:title" content="åŠ è½½ä¸­..." />
  <meta property="og:description" content="æ­£åœ¨åŠ è½½æ–°é—»..." />
  <meta property="og:image" content="" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="" />

  <style>
    body {
      max-width: 900px;
      margin: 30px auto;
      padding: 0 15px;
      font-family: "å¾®è½¯é›…é»‘", sans-serif;
    }
    .back-link {
      display: inline-block;
      margin-bottom: 20px;
      color: #0077cc;
      text-decoration: none;
    }
    .news-title {
      font-size: 2em;
      margin-bottom: 10px;
    }
    .news-meta {
      color: #666;
      margin-bottom: 10px;
    }
    .news-image {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 20px;
      display: block;
    }
    .news-content {
      white-space: pre-wrap;
      line-height: 1.6;
      font-size: 1.1em;
      margin-bottom: 20px;
    }
    .page-counter {
      font-size: 14px;
      color: #666;
      margin: 15px 0;
    }
  </style>
</head>
<body>
  <a href="../index.html" class="back-link">â† è¿”å›æ–°é—»åˆ—è¡¨</a>

  <h1 id="title" class="news-title">åŠ è½½ä¸­...</h1>
  <div id="meta" class="news-meta"></div>

  <!-- é˜…è¯»é‡æ˜¾ç¤º -->
  <div class="page-counter">
    ğŸ“– æœ¬æ–‡é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv">0</span> æ¬¡
  </div>

  <img id="image" class="news-image" src="" alt="" style="display:none" />
  <div id="content" class="news-content"></div>

  <script>
    function getQueryId() {
      const params = new URLSearchParams(window.location.search);
      return params.get('id');
    }

    const newsId = getQueryId();

    if (newsId === null) {
      document.getElementById('title').textContent = 'é”™è¯¯ï¼šæœªæŒ‡å®šæ–°é—»ID';
    } else {
      fetch('../news_content.json')
        .then(res => res.json())
        .then(news => {
          if (newsId < 0 || newsId >= news.length) {
            document.getElementById('title').textContent = 'æ–°é—»ä¸å­˜åœ¨';
            return;
          }
          const item = news[newsId];

          // è®¾ç½®é¡µé¢æ ‡é¢˜
          document.title = item.title;

          // è®¾ç½® OG æ ‡ç­¾ï¼ˆç”¨äº QQ/å¾®ä¿¡æŠ“å–ï¼‰
          document.querySelector('meta[property="og:title"]').setAttribute('content', item.title);
          document.querySelector('meta[property="og:description"]').setAttribute('content', item.content.substring(0, 80) + "...");
          if (item.image && item.image.trim() !== '') {
            document.querySelector('meta[property="og:image"]').setAttribute('content', item.image);
          }
          document.querySelector('meta[property="og:url"]').setAttribute('content', window.location.href);

          // å¡«å……æ­£æ–‡
          document.getElementById('title').textContent = item.title;
          document.getElementById('meta').textContent = `${item.date} Â· ${item.location} Â· ä½œè€…ï¼š${item.author}`;

          if (item.image && item.image.trim() !== '') {
            const img = document.getElementById('image');
            if (item.image.startsWith('#')) {
              img.style.display = 'none';
              const colorDiv = document.createElement('div');
              colorDiv.style.width = '100%';
              colorDiv.style.height = '200px';
              colorDiv.style.backgroundColor = item.image;
              colorDiv.style.borderRadius = '8px';
              colorDiv.style.marginBottom = '20px';
              img.parentNode.insertBefore(colorDiv, img);
            } else {
              img.src = item.image;
              img.style.display = 'block';
            }
          }

          document.getElementById('content').textContent = item.content;
        })
        .catch(() => {
          document.getElementById('title').textContent = 'åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
        });
    }
  </script>

  <!-- Busuanzi ç»Ÿè®¡è„šæœ¬ -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</body>
</html>

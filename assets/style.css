:root {
  /* MD3 核心色板 (基于蓝色调) */
  --md-sys-color-primary: #006495;
  --md-sys-color-on-primary: #ffffff;
  --md-sys-color-primary-container: #cbe6ff;
  --md-sys-color-on-primary-container: #001e30;
  --md-sys-color-secondary-container: #dce2e9;
  --md-sys-color-on-secondary-container: #151b20;
  --md-sys-color-surface: #fdfcff;
  --md-sys-color-on-surface: #1a1c1e;
  --md-sys-color-surface-container: #f0f4f8;
  --md-sys-color-outline: #72777f;
  --md-sys-color-outline-variant: #c2c7cf;

  /* Expressive 形状与间距 */
  --shape-corner-xl: 28px;
  --shape-corner-l: 24px;
  --shape-corner-m: 16px;
  
  /* 动画曲线：Emphasized (更加柔和流畅) */
  --motion-easing-emphasized: cubic-bezier(0.4, 0.0, 0.2, 1.0);
  --motion-duration-long: 800ms; /* 增加时长，使切换不生硬 */
  --motion-duration-short: 300ms;
}

@media (prefers-color-scheme: dark) {
  :root {
    --md-sys-color-surface: #1a1c1e;
    --md-sys-color-on-surface: #e2e2e6;
    --md-sys-color-surface-container: #202429;
    --md-sys-color-primary-container: #004b73;
    --md-sys-color-primary: #93cae4;
    --md-sys-color-on-primary: #00324c;
    --md-sys-color-secondary-container: #3e4449;
    --md-sys-color-on-secondary-container: #dce2e9;
  }
}

* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
body { 
    font-family: 'Roboto', system-ui, sans-serif; 
    background: var(--md-sys-color-surface); 
    color: var(--md-sys-color-on-surface); 
    overflow-x: hidden;
}

/* --- 侧边栏 (Drawer) - 修复显示问题 --- */
.drawer {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 320px; 
    height: 100%;
    background: var(--md-sys-color-surface-container);
    z-index: 200;
    /* 默认移出屏幕 */
    transform: translateX(-100%);
    transition: transform var(--motion-duration-short) var(--motion-easing-emphasized);
    padding: 16px;
    border-top-right-radius: var(--shape-corner-xl);
    border-bottom-right-radius: var(--shape-corner-xl);
    box-shadow: 4px 0 24px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
}

.drawer.open {
    transform: translateX(0); /* 移入屏幕 */
}

.drawer-scrim {
    position: fixed; inset: 0; background: rgba(0,0,0,0.5); 
    z-index: 150; opacity: 0; pointer-events: none;
    transition: opacity var(--motion-duration-short) linear;
}
.drawer-scrim.visible { opacity: 1; pointer-events: auto; }

.drawer-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; padding-left: 8px; height: 64px;}
.drawer-item {
    display: flex; align-items: center; gap: 16px;
    padding: 16px 24px;
    margin-bottom: 4px;
    border-radius: 28px; /* 胶囊形 */
    text-decoration: none;
    color: var(--md-sys-color-on-surface);
    font-weight: 500;
    transition: background 0.2s;
}
.drawer-item:hover { background: rgba(0,0,0,0.05); }
.drawer-item.active { background: var(--md-sys-color-primary-container); color: var(--md-sys-color-on-primary-container); }

/* --- 布局框架 --- */
.top-app-bar { height: 64px; display: flex; align-items: center; justify-content: space-between; padding: 0 16px; background: var(--md-sys-color-surface); position: sticky; top: 0; z-index: 100; }
.app-logo { height: 32px; width: auto; }

.main-layout { 
    max-width: 1280px; margin: 0 auto; padding: 24px 16px; 
    display: flex; flex-direction: column; gap: 24px; 
}

/* 桌面端双栏布局：左窄右宽 */
@media (min-width: 900px) {
    .main-layout { 
        display: grid; 
        grid-template-columns: 360px 1fr; /* 左侧固定360px */
        gap: 32px; 
        align-items: start; 
    }
    .sidebar-area { position: sticky; top: 88px; } /* 吸顶效果 */
}

/* --- 卡片通用 --- */
.card { 
    background: var(--md-sys-color-surface-container); 
    border-radius: var(--shape-corner-l); 
    padding: 24px; 
    margin-bottom: 24px;
}
.section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.section-header h3 { font-size: 1.25rem; font-weight: 500; }

/* --- 1. 新闻头条 (Carousel) - 柔和动画 --- */
/* 注意：现在头条放在内容区，宽度更大 */
.headlines-section {
    position: relative; width: 100%; height: 400px; /* 增加高度 */
    border-radius: var(--shape-corner-xl);
    overflow: hidden;
    margin-bottom: 32px;
    touch-action: pan-y;
}

.headline-item {
    position: absolute; inset: 0;
    opacity: 0; 
    visibility: hidden;
    /* 关键：使用 transform scale 实现呼吸感，opacity 实现淡入淡出 */
    transform: scale(1.03); 
    transition: 
        opacity var(--motion-duration-long) var(--motion-easing-emphasized),
        transform var(--motion-duration-long) var(--motion-easing-emphasized),
        visibility 0s linear var(--motion-duration-long); /* 延迟隐藏 */
    background-size: cover; background-position: center;
}

.headline-item.active {
    opacity: 1; 
    visibility: visible;
    transform: scale(1); /* 激活时回归原始大小 */
    transition-delay: 0s;
    z-index: 1;
}

.headline-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.4) 60%, transparent 100%);
    padding: 32px; color: white;
    display: flex; flex-direction: column; gap: 10px;
}
.headline-title { font-size: 1.75rem; font-weight: 700; line-height: 1.3; }
.headline-snippet { 
    font-size: 1rem; opacity: 0.9; 
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; 
}

/* --- 2. 快捷菜单 (Grid) --- */
.menu-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
.menu-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: inherit; gap: 8px; text-align: center; }
.menu-icon-box { 
    width: 64px; height: 64px; /* 加大图标区域 */
    background: var(--md-sys-color-surface); 
    color: var(--md-sys-color-primary); 
    border-radius: 20px; 
    display: flex; align-items: center; justify-content: center; 
    transition: background 0.2s;
}
.menu-item:hover .menu-icon-box { background: var(--md-sys-color-primary-container); color: var(--md-sys-color-on-primary-container); }
.menu-item p { font-size: 0.85rem; font-weight: 500; }

/* --- 3. 新闻列表 --- */
.news-card {
    display: flex; 
    background: var(--md-sys-color-surface-container); 
    border-radius: var(--shape-corner-l);
    overflow: hidden; 
    margin-bottom: 16px; 
    cursor: pointer; 
    min-height: 120px;
    transition: background 0.2s;
}
.news-card:hover { background: var(--md-sys-color-secondary-container); }
.news-img { width: 140px; object-fit: cover; display: block; }
.news-content { padding: 16px 24px; flex: 1; display: flex; flex-direction: column; justify-content: center; }
.news-card.text-only .news-content { padding: 24px 28px; } /* 纯文本模式加大内边距 */

.news-tag { color: var(--md-sys-color-primary); font-size: 0.8rem; font-weight: 700; margin-bottom: 8px; }
.news-title { font-size: 1.15rem; font-weight: 600; line-height: 1.4; margin-bottom: 8px; }
.news-meta { font-size: 0.85rem; color: var(--md-sys-color-outline); }

/* --- 按钮与控件 --- */
.icon-btn { background:0 0; border:none; padding:10px; border-radius:50%; color:inherit; cursor:pointer; }
.icon-btn:hover { background: rgba(0,0,0,0.08); }
.text-btn { background:0 0; border:none; color:var(--md-sys-color-primary); font-weight:600; cursor:pointer; padding: 6px 12px; border-radius: 12px; }
.text-btn:hover { background: var(--md-sys-color-primary-container); }
.tonal-btn { background:var(--md-sys-color-secondary-container); color:var(--md-sys-color-on-secondary-container); border:none; padding:10px 24px; border-radius:18px; font-weight:600; cursor: pointer; width: 100%;}

/* --- 弹窗与归档 --- */
dialog { border: none; background: var(--md-sys-color-surface); margin: auto; padding: 0; box-shadow: 0 25px 50px rgba(0,0,0,0.25); border-radius: var(--shape-corner-xl); }
dialog::backdrop { background: rgba(0,0,0,0.5); backdrop-filter: blur(2px); }
.fullscreen-dialog { width: 100%; height: 100%; max-width: 100%; max-height: 100%; border-radius: 0; }
.center-dialog { width: min(90%, 420px); max-height: 80vh; }
.dialog-header { padding: 16px 20px; display: flex; align-items: center; gap: 16px; border-bottom: 1px solid rgba(0,0,0,0.05); }

/* 归档样式 */
.month-scroller { display: flex; overflow-x: auto; gap: 10px; padding: 10px 20px; scrollbar-width: none; }
.month-chip {
    padding: 8px 20px; border-radius: 20px; 
    background: var(--md-sys-color-surface-container);
    border: 1px solid var(--md-sys-color-outline-variant);
    cursor: pointer; transition: 0.2s; flex-shrink: 0;
}
.month-chip.active { background: var(--md-sys-color-primary); color: white; border-color: transparent; }

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>万方出行通</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,1,-50..200" />
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>

    <div class="aurora-bg" id="auroraBg">
        <div class="blob"></div>
        <div class="blob"></div>
        <div class="blob"></div>
    </div>

    <div class="sidebar-overlay"></div>
    <aside class="sidebar glass-card" id="sidebar">
        <div style="padding: 16px 24px; display: flex; justify-content: space-between; align-items: center;">
            <h2 style="font-size: 20px;">导航</h2>
            <button class="btn-icon" onclick="toggleSidebar()"><span class="material-symbols-rounded">close</span></button>
        </div>
        <div id="sidebarList" style="flex:1; overflow-y:auto; padding: 0 12px;"></div>
    </aside>

    <header class="top-bar">
        <div class="top-left">
            <button class="btn-icon" onclick="toggleSidebar()"><span class="material-symbols-rounded">menu</span></button>
            <div class="app-logo mobile-only"></div>
        </div>
        <div class="top-center">
            <div class="app-logo"></div>
        </div>
        <div class="top-right">
            <button class="btn-icon" onclick="openModal('searchModal')"><span class="material-symbols-rounded">search</span></button>
            <button class="btn-icon" onclick="openModal('settingsModal')"><span class="material-symbols-rounded">settings</span></button>
        </div>
    </header>

    <div class="main-container">
        
        <div class="left-column">
            <section class="glass-card hero-section">
                <div class="hero-slider" id="heroSlider"></div>
                <div style="position:absolute; bottom:0; left:0; width:100%; height:4px; background:rgba(255,255,255,0.3);" id="heroProgressContainer">
                    <div class="progress-bar" id="heroProgressBar" style="width:0%"></div>
                </div>
            </section>

            <section class="glass-card quick-actions">
                <div class="actions-grid" id="actionsGrid"></div>
                <button class="expand-btn" id="expandActionBtn" onclick="toggleActions()">
                    <span class="material-symbols-rounded">keyboard_arrow_down</span>
                    <span>展开全部</span>
                </button>
            </section>

            <div class="footer-spacer"></div>

            <div class="footer-box app-dl-wrapper desktop-only" id="footerDesktop">
                <a href="#" class="app-dl-btn">
                    <span class="material-symbols-rounded">android</span> 下载客户端
                </a>
                <div class="copyright">© 2025 万方出行通 (Desktop)</div>
            </div>
        </div>

        <div class="right-column">
            <div class="section-header">
                <span class="section-title">近期动态</span>
                <span class="btn-text" onclick="openHistory()">历史新闻</span>
            </div>
            
            <div id="newsList">
                </div>

            <div class="footer-box app-dl-wrapper mobile-only" id="footerMobile">
                <a href="#" class="app-dl-btn">
                    <span class="material-symbols-rounded">android</span> 下载客户端
                </a>
                <div class="copyright">© 2025 万方出行通 (Mobile)</div>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="section-header">
                <span class="section-title">设置</span>
                <button class="btn-icon" onclick="closeModal('settingsModal')"><span class="material-symbols-rounded">close</span></button>
            </div>
            
            <div class="setting-row">
                <span>流光背景动画</span>
                <label class="switch"><input type="checkbox" id="settingBgAnim" onchange="toggleBgAnim()"><span class="slider"></span></label>
            </div>
            <div class="setting-row">
                <span>显示下载卡片</span>
                <label class="switch"><input type="checkbox" id="settingAppDl" onchange="toggleAppDl()"><span class="slider"></span></label>
            </div>
            <div class="setting-row" style="flex-direction: column; align-items: flex-start; gap: 8px;">
                <span>只看地区</span>
                <select id="locationSelect" onchange="filterLocation()" style="width:100%; padding:8px; border-radius:8px;"></select>
            </div>
        </div>
    </div>

    <div class="modal" id="searchModal">
        <div class="modal-content">
            <div style="background:var(--md-sys-color-surface-container); border-radius:99px; padding:8px 16px; display:flex; align-items:center;">
                <span class="material-symbols-rounded">search</span>
                <input type="text" placeholder="搜索..." oninput="handleSearch(this.value)" 
                       style="border:none; background:transparent; margin-left:8px; flex:1; outline:none; font-size:16px;">
                <button class="btn-icon" onclick="closeModal('searchModal')"><span class="material-symbols-rounded">close</span></button>
            </div>
            <div id="searchResults" style="margin-top:16px;"></div>
        </div>
    </div>

    <div class="modal" id="historyModal">
        <div class="modal-content" style="max-height:85vh; width: 600px;">
            <div class="section-header">
                <span class="section-title">历史新闻</span>
                <button class="btn-icon" onclick="closeModal('historyModal')"><span class="material-symbols-rounded">close</span></button>
            </div>
            <div id="historyList"></div>
        </div>
    </div>

    <script src="assets/menu_data.js"></script>
    <script src="assets/script.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>航行 StarFlight</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Rounded" rel="stylesheet">
</head>
<body>

  <header class="top-app-bar">
    <div class="leading-section">
      <button class="icon-btn" id="navHomeBtn" hidden>
        <span class="material-symbols-rounded">arrow_back</span>
      </button>
      <div class="app-branding">
        <span class="material-symbols-rounded logo-icon">flight_takeoff</span>
        <span class="headline">航行</span>
      </div>
    </div>
    
    <div class="trailing-section">
      <button class="icon-btn nav-tab active" data-target="search" title="预订">
        <span class="material-symbols-rounded">search</span>
      </button>
      <button class="icon-btn nav-tab" data-target="wallet" title="卡包">
        <span class="material-symbols-rounded">wallet</span>
      </button>
      <button class="icon-btn nav-tab" data-target="settings" title="设置">
        <span class="material-symbols-rounded">settings</span>
      </button>
      <a href="../flights/dgree.html" class="icon-btn" title="热度">
        <span class="material-symbols-rounded">local_fire_department</span>
      </a>
    </div>
  </header>

  <main class="main-container">
    
    <section id="view-search" class="view-section active">
      <div class="split-layout">
        
        <aside class="search-pane">
          <div class="pane-content">
            <h2>探索旅程</h2>
            
            <div class="route-inputs">
              <div class="station-input-group">
                <div class="station-display">
                  <span class="station-code" id="depCodeDisplay">---</span>
                  <input type="text" id="fromInput" class="station-name-input" placeholder="出发城市" list="airportDatalist">
                </div>
                <button class="mini-dropdown-btn" id="depDropdownBtn">
                  <span class="material-symbols-rounded">arrow_drop_down</span>
                </button>
              </div>

              <button class="swap-btn" id="swapBtn">
                <span class="material-symbols-rounded">sync_alt</span>
              </button>

              <div class="station-input-group">
                <div class="station-display">
                  <span class="station-code" id="arrCodeDisplay">---</span>
                  <input type="text" id="toInput" class="station-name-input" placeholder="到达城市" list="airportDatalist">
                </div>
                <button class="mini-dropdown-btn" id="arrDropdownBtn">
                  <span class="material-symbols-rounded">arrow_drop_down</span>
                </button>
              </div>
            </div>

            <div class="date-field-container">
              <span class="material-symbols-rounded icon">calendar_month</span>
              <div class="date-text-group">
                <label>出发日期</label>
                <input type="date" id="searchDate">
              </div>
              <span id="searchWeekBadge" class="badge">今天</span>
            </div>

            <div class="filters-container">
              <div class="filter-header">
                <span class="material-symbols-rounded">tune</span> 筛选
              </div>
              <div class="filter-chips">
                <select id="filterAirline" class="filter-chip-select">
                  <option value="">所有航司</option>
                  </select>
                <select id="filterTime" class="filter-chip-select">
                  <option value="">全天时段</option>
                  <option value="morning">早上 (06-12)</option>
                  <option value="afternoon">下午 (12-18)</option>
                  <option value="evening">晚上 (18-24)</option>
                  <option value="night">凌晨 (00-06)</option>
                </select>
                <select id="filterCabin" class="filter-chip-select">
                  <option value="">所有舱位</option>
                  <option value="eco">经济舱</option>
                  <option value="bus">商务舱</option>
                  <option value="first">头等舱</option>
                </select>
                <select id="filterPlane" class="filter-chip-select">
                  <option value="">所有机型</option>
                  <option value="wide">宽体机</option>
                  <option value="narrow">窄体机</option>
                </select>
              </div>
            </div>

            <button class="btn-filled-large" id="searchBtn">
              <span class="material-symbols-rounded">search</span> 查询航班
            </button>
          </div>
        </aside>

        <div class="results-pane">
          <div id="flightGrid" class="card-grid">
            <div class="empty-state">
              <span class="material-symbols-rounded icon-big">flight_takeoff</span>
              <p>输入行程，开启探索</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="view-wallet" class="view-section">
      <div class="view-header">
        <h1>我的行程</h1>
      </div>
      <div id="walletGrid" class="card-grid"></div>
    </section>

    <section id="view-settings" class="view-section">
      <div class="settings-container">
        <h1>设置</h1>
        
        <div class="setting-card">
          <div class="setting-row">
            <div class="setting-text">
              <h3>行程智能通知</h3>
              <p>包含出票、值机(-120m)、登机(-30m)及起飞提醒</p>
            </div>
            <label class="switch">
              <input type="checkbox" id="masterNotifySwitch">
              <span class="slider"></span>
            </label>
          </div>
          <div class="setting-row">
            <div class="setting-text">
              <h3>记忆搜索偏好</h3>
              <p>自动填充上次的出发地与目的地</p>
            </div>
            <label class="switch">
              <input type="checkbox" id="memorySwitch">
              <span class="slider"></span>
            </label>
          </div>
          <div class="setting-row">
            <div class="setting-text">
              <h3>数据管理</h3>
              <p>清除所有缓存与票据</p>
            </div>
            <button class="btn-text error" id="clearDataBtn">清除数据</button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <dialog id="airportSelectDialog" class="bottom-sheet-dialog">
    <div class="sheet-content">
      <div class="sheet-header">
        <h3>选择机场</h3>
        <button class="icon-btn" onclick="document.getElementById('airportSelectDialog').close()">
          <span class="material-symbols-rounded">close</span>
        </button>
      </div>
      <div class="airport-list-container" id="airportSelectionList">
        </div>
    </div>
  </dialog>

  <dialog id="ticketDialog" class="full-screen-dialog">
    <div class="dialog-surface">
      <div class="dialog-top-bar">
        <button class="icon-btn" id="closeTicketBtn">
          <span class="material-symbols-rounded">close</span>
        </button>
        <span class="dialog-title">航班详情</span>
        <div style="width: 40px;"></div>
      </div>

      <div class="ticket-content">
        <div id="boardingPassArea" class="boarding-pass" hidden>
          <div class="bp-header">
            <img src="" alt="Airline" class="bp-logo" id="bpAirlineLogo">
            <span class="bp-type">电子登机牌</span>
          </div>
          <div class="bp-qr-section">
            <img id="bpQrCode" src="" alt="QR Code">
            <div class="bp-flight-no" id="bpFlightNoDisplay">--</div>
          </div>
          <div class="bp-actions">
            <a href="#" target="_blank" id="bpTrackerBtn" class="btn-tonal-small">
              <span class="material-symbols-rounded">radar</span> 实时动态
            </a>
            <button class="btn-tonal-small error-tonal" id="deleteTicketBtn">
              <span class="material-symbols-rounded">delete</span> 删除
            </button>
          </div>
        </div>

        <div class="flight-info-card">
          <div class="fi-route">
            <div class="fi-city">
              <span class="code" id="modalDepCode">---</span>
              <span class="time" id="modalDepTime">--:--</span>
              <span class="name" id="modalDepName">--</span>
              <span class="term" id="modalDepTerm">--</span>
            </div>
            <div class="fi-duration">
              <span id="modalDuration">--</span>
              <div class="line-graphic">
                <span class="material-symbols-rounded plane-icon">flight</span>
              </div>
              <span class="stops">直飞</span>
            </div>
            <div class="fi-city">
              <span class="code" id="modalArrCode">---</span>
              <span class="time" id="modalArrTime">--:--</span>
              <span class="name" id="modalArrName">--</span>
              <span class="term" id="modalArrTerm">--</span>
            </div>
          </div>
          <div class="fi-details">
            <span id="modalDate">--</span> · 
            <span id="modalAirline">--</span> · 
            <span id="modalAircraft">--</span>
          </div>
        </div>

        <div id="bookingArea">
          <h3>选择舱位</h3>
          <div class="seat-grid" id="seatOptions"></div>
        </div>
      </div>

      <div class="dialog-footer" id="bookingFooter">
        <div class="price-container">
          <span class="label">总计</span>
          <span class="price" id="totalPrice">--</span>
        </div>
        <button class="btn-filled" id="confirmBuyBtn" disabled>确认支付</button>
      </div>
    </div>
  </dialog>

  <datalist id="airportDatalist"></datalist>

  <div id="toast" class="toast"></div>

  <script src="app.js"></script>
</body>
</html>

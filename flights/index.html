<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>星际航班预订</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Rounded" rel="stylesheet">
</head>
<body>

  <header class="top-app-bar">
    <div class="leading-icon">
      <button class="icon-btn" id="homeBtn" title="返回主页">
        <span class="material-symbols-rounded">arrow_back</span>
      </button>
    </div>
    <div class="headline">星际航行</div>
    <div class="trailing-actions">
      <button class="nav-btn active" data-target="search">预订</button>
      <button class="nav-btn" data-target="wallet">卡包</button>
      <button class="nav-btn" data-target="settings">设置</button>
      <a href="../flights/dgree.html" class="nav-btn heat-link">热度</a>
    </div>
  </header>

  <main class="main-container">
    
    <div id="view-search" class="view-section active">
      <div class="split-layout">
        
        <aside class="search-pane">
          <div class="pane-content">
            <h2 class="display-small">探索旅程</h2>
            
            <div class="route-selector">
              <div class="station-input" id="depStationBox">
                <span class="station-code" id="depCodeDisplay">---</span>
                <span class="station-name" id="depNameDisplay">出发地</span>
                <input type="text" class="ghost-input" id="depInput" placeholder="输入城市或机场" list="airportList">
              </div>
              
              <button class="swap-btn" id="swapBtn">
                <span class="material-symbols-rounded">sync_alt</span>
              </button>
              
              <div class="station-input" id="arrStationBox">
                <span class="station-code" id="arrCodeDisplay">---</span>
                <span class="station-name" id="arrNameDisplay">目的地</span>
                <input type="text" class="ghost-input" id="arrInput" placeholder="输入城市或机场" list="airportList">
              </div>
            </div>

            <button class="btn-tonal full-width" id="showAllAirportsBtn">
              <span class="material-symbols-rounded">format_list_bulleted</span>
              选择机场列表
            </button>

            <datalist id="airportList"></datalist>

            <div class="date-field-container">
              <label>出发日期</label>
              <input type="date" id="searchDate">
            </div>

            <button class="btn-filled full-width" id="searchBtn">
              <span class="material-symbols-rounded">search</span>
              查询航班
            </button>
          </div>
        </aside>

        <section class="results-pane">
          <div class="results-header">
            <span id="resultCount">准备起飞</span>
          </div>
          <div id="flightGrid" class="card-grid">
            <div class="empty-placeholder">
              <span class="material-symbols-rounded icon-large">travel_explore</span>
              <p>输入航线，开始探索</p>
            </div>
          </div>
        </section>
      </div>
    </div>

    <div id="view-wallet" class="view-section">
      <div class="wallet-container">
        <h2 class="display-small">我的行程</h2>
        <div id="walletGrid" class="card-grid"></div>
      </div>
    </div>

    <div id="view-settings" class="view-section">
      <div class="settings-container">
        <h2 class="display-small">设置</h2>
        
        <div class="setting-group">
          <h3>通知提醒</h3>
          <div class="setting-item">
            <div class="text">
              <span>开启所有通知</span>
              <small>购买、值机、登机、起飞提醒</small>
            </div>
            <label class="switch">
              <input type="checkbox" id="notifyMasterSwitch">
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <div class="setting-group">
          <h3>偏好</h3>
          <div class="setting-item">
            <div class="text">
              <span>记住我的航线</span>
              <small>下次打开自动填充出发/到达地</small>
            </div>
            <label class="switch">
              <input type="checkbox" id="rememberRouteSwitch">
              <span class="slider"></span>
            </label>
          </div>
        </div>
        
        <div class="setting-group">
          <div class="setting-item">
             <div class="text"><span>清除缓存数据</span></div>
             <button class="btn-text error" id="clearDataBtn">清除</button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <dialog id="airportDialog" class="md-dialog full-screen-mobile">
    <div class="dialog-header">
      <h3>选择机场</h3>
      <button class="icon-btn" id="closeAirportDialog"><span class="material-symbols-rounded">close</span></button>
    </div>
    <div class="dialog-body" id="airportListContainer">
      </div>
  </dialog>

  <dialog id="bookingDialog" class="md-dialog">
    <div class="dialog-content">
      <div class="dialog-header">
        <h3 id="modalTitle">航班详情</h3>
        <button class="icon-btn" onclick="document.getElementById('bookingDialog').close()"><span class="material-symbols-rounded">close</span></button>
      </div>
      
      <div class="ticket-preview" id="bookingPreview">
        </div>

      <div class="seat-selection">
        <h4>选择舱位</h4>
        <div class="seat-options" id="seatOptions"></div>
      </div>
      
      <div class="tracker-section" id="trackerSection">
         <a href="#" target="_blank" id="trackerLink" class="btn-tonal btn-sm">
           <span class="material-symbols-rounded">radar</span> 
           查看飞机实时动态
         </a>
      </div>

      <div class="dialog-actions">
        <span class="price-display" id="totalPrice">--</span>
        <button class="btn-filled" id="confirmBuyBtn" disabled>确认购买</button>
      </div>
    </div>
  </dialog>

  <dialog id="boardingPassDialog" class="md-dialog">
    <div class="boarding-pass-card">
      <div class="bp-header">
        <img id="bpLogo" src="" alt="Logo" class="airline-logo">
        <span class="bp-airline" id="bpAirline">Airline</span>
      </div>
      <div class="bp-body">
        <div class="bp-row">
          <div class="bp-group">
            <label>航班</label>
            <strong id="bpFlight"></strong>
          </div>
          <div class="bp-group right">
            <label>日期</label>
            <strong id="bpDate"></strong>
          </div>
        </div>
        <div class="bp-route">
          <span class="bp-code big" id="bpDepCode"></span>
          <span class="material-symbols-rounded plane-icon">flight</span>
          <span class="bp-code big" id="bpArrCode"></span>
        </div>
        <div class="bp-row times">
          <span id="bpDepTime"></span>
          <span id="bpArrTime"></span>
        </div>
        <div class="bp-row">
          <div class="bp-group">
            <label>舱位</label>
            <strong id="bpClass"></strong>
          </div>
          <div class="bp-group">
             <label>设备</label>
             <strong id="bpEquip"></strong>
          </div>
        </div>
      </div>
      <div class="bp-footer">
        <img id="bpQr" src="" alt="QR Code" class="qr-code">
        <p>凭此电子登机牌登机</p>
      </div>
      <div class="bp-actions">
        <button class="btn-text error" id="deleteTicketBtn">删除订单</button>
        <button class="btn-tonal" onclick="document.getElementById('boardingPassDialog').close()">关闭</button>
      </div>
    </div>
  </dialog>

  <div id="toast" class="toast"></div>

  <script src="app.js"></script>
</body>
</html>

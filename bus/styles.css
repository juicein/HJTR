/* --- 基础变量 --- */
:root {
    --md-sys-color-primary: #006495;
    --md-sys-color-on-primary: #ffffff;
    --md-sys-color-primary-container: #cbe6ff;
    --md-sys-color-on-primary-container: #001e30;
    --md-sys-color-secondary-container: #dce2e9;
    --md-sys-color-surface: #fdfcff;
    --md-sys-color-surface-container: #f0f4f8; /* 浅灰背景 */
    --md-sys-color-outline: #72777f;
    --md-sys-color-outline-variant: #c2c7cf;
    --highlight-orange: #ff6d00;
    
    --radius-l: 24px;
    --radius-m: 16px;
    --radius-s: 8px;
    
    font-family: 'Roboto', system-ui, sans-serif;
}

@media (prefers-color-scheme: dark) {
    :root {
        --md-sys-color-surface: #1a1c1e;
        --md-sys-color-surface-container: #202429;
        --md-sys-color-on-primary-container: #ffffff;
        --md-sys-color-primary-container: #004b73;
        --md-sys-color-primary: #93cae4;
        --md-sys-color-secondary-container: #353a40;
        --md-sys-color-outline: #8c9199;
        --md-sys-color-outline-variant: #43474e;
    }
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { background-color: var(--md-sys-color-surface-container); color: var(--md-sys-color-on-primary-container); padding-top: 64px; padding-bottom: 20px;}

/* --- Top Bar --- */
.top-bar {
    position: fixed; top: 0; left: 0; right: 0; height: 64px;
    background: var(--md-sys-color-surface);
    display: flex; align-items: center; padding: 0 16px;
    z-index: 100;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}
.title { flex: 1; font-size: 22px; font-weight: 500; text-align: center; }
.icon-btn {
    background: none; border: none; color: inherit; cursor: pointer;
    display: flex; align-items: center; gap: 4px; padding: 8px; border-radius: 50%;
}
.label-text { font-size: 14px; font-weight: 500; }

/* --- Chips (Filter) --- */
.filter-chip-bar {
    position: sticky; top: 64px; z-index: 90;
    background: var(--md-sys-color-surface-container);
    padding: 12px 16px; display: flex; gap: 8px; overflow-x: auto;
    scrollbar-width: none;
}
.chip {
    padding: 6px 16px; border-radius: 8px; border: 1px solid var(--md-sys-color-outline);
    background: transparent; color: var(--md-sys-color-outline); font-weight: 500;
    cursor: pointer; white-space: nowrap; transition: 0.2s;
}
.chip.active {
    background: var(--md-sys-color-primary-container);
    color: var(--md-sys-color-on-primary-container);
    border-color: transparent;
}

/* --- Lists & Cards --- */
#app { padding: 0 16px; max-width: 600px; margin: 0 auto; }

.card {
    background: var(--md-sys-color-surface);
    border-radius: var(--radius-m);
    padding: 16px; margin-bottom: 12px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    display: flex; align-items: center; gap: 16px;
    cursor: pointer; transition: transform 0.1s;
    position: relative; overflow: hidden;
}
.card:active { transform: scale(0.98); }
/* 线路标志色条 */
.card-color-strip {
    width: 6px; height: 100%; position: absolute; left: 0; top: 0;
}

.line-icon {
    width: 40px; height: 40px; border-radius: 12px;
    background: var(--md-sys-color-secondary-container);
    display: flex; align-items: center; justify-content: center;
    font-size: 24px; color: var(--md-sys-color-primary);
}
.line-info { flex: 1; }
.line-name { font-size: 18px; font-weight: 600; margin-bottom: 4px; }
.line-route { font-size: 14px; color: var(--md-sys-color-outline); }

/* --- Detail Page Timeline --- */
.detail-header {
    background: var(--md-sys-color-surface); padding: 20px;
    border-radius: var(--radius-l); margin-bottom: 16px;
}
.tag-row { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }
.tag {
    background: var(--md-sys-color-secondary-container);
    padding: 4px 10px; border-radius: 6px; font-size: 12px;
}

.timeline {
    background: var(--md-sys-color-surface);
    padding: 24px 16px; border-radius: var(--radius-l);
    position: relative;
}
.timeline-item {
    position: relative; padding-left: 30px; padding-bottom: 24px;
    cursor: pointer;
}
.timeline-item:last-child { padding-bottom: 0; }
/* 竖线 */
.timeline-item::before {
    content: ''; position: absolute; left: 9px; top: 24px; bottom: -4px;
    width: 2px; background: var(--md-sys-color-outline-variant);
}
.timeline-item:last-child::before { display: none; }
/* 圆点 */
.timeline-item::after {
    content: ''; position: absolute; left: 4px; top: 6px;
    width: 12px; height: 12px; border-radius: 50%;
    border: 2px solid var(--md-sys-color-outline);
    background: var(--md-sys-color-surface);
}
.timeline-item.start::after { background: var(--md-sys-color-primary); border-color: var(--md-sys-color-primary); }

.station-name { font-size: 16px; font-weight: 500; }
.station-actions { 
    display: none; margin-top: 8px; gap: 8px; 
}
.timeline-item.active .station-actions { display: flex; }

/* --- Planner --- */
.planner-box {
    background: var(--md-sys-color-surface); padding: 16px;
    border-radius: var(--radius-l); display: flex; flex-direction: column; gap: 12px;
}
.input-group {
    background: var(--md-sys-color-surface-container);
    border-radius: 12px; padding: 0 12px;
    display: flex; align-items: center;
}
.input-group input {
    width: 100%; border: none; background: transparent; padding: 16px 8px;
    font-size: 16px; outline: none; color: inherit;
}
.plan-result-card {
    background: var(--md-sys-color-surface); padding: 16px;
    border-radius: var(--radius-m); margin-top: 12px; border: 1px solid transparent;
}
.plan-segments { display: flex; align-items: center; flex-wrap: wrap; gap: 4px; margin-top: 8px; }
.arrow { color: var(--md-sys-color-outline); font-size: 12px; }

/* --- Dialog & Utilities --- */
dialog {
    border: none; border-radius: 28px; padding: 24px;
    background: var(--md-sys-color-surface); color: inherit;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    margin: auto; max-width: 80%; width: 300px;
}
dialog::backdrop { background: rgba(0,0,0,0.5); }
.list-select button {
    width: 100%; text-align: left; padding: 12px; background: none; border: none;
    font-size: 16px; border-bottom: 1px solid var(--md-sys-color-outline-variant); color: inherit;
}
.btn-primary {
    background: var(--md-sys-color-primary); color: white; border: none;
    padding: 8px 16px; border-radius: 20px; font-weight: 500; cursor: pointer;
}
.btn-small { padding: 4px 12px; font-size: 12px; }
.hidden { display: none !important; }
